;; Compile Options : /TML610111 /MS /near /Icommon /Imain /Iirq /Itimer /Iclock /Itbc /Ipwm /Iuart /Ivolume /Iled /D_ML610Q111 /SS 1024 /SD /Oa /Om /W 3 /Wc /Fa_output\_obj\ 
;; Version Number  : Ver.3.31.4
;; File Name       : tbc.c

	type (ML610111) 
	model small, near
	$$tb_getHtbdiv$tbc segment code 2h #0h
	$$tb_setHtbdiv$tbc segment code 2h #0h
CVERSION 3.31.4
CGLOBAL 01H 02H 0000H "tb_getHtbdiv" 08H 02H 01H 00H 80H 00H 00H 00H 00H
CGLOBAL 01H 03H 0000H "tb_setHtbdiv" 08H 02H 00H 00H 80H 00H 00H 00H 01H
CSTRUCTTAG 0000H 0000H 0000H 0008H 00000001H "_Notag"
CSTRUCTMEM 52H 00000001H 00000000H "b0" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000001H "b1" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000002H "b2" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000003H "b3" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000004H "b4" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000005H "b5" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000006H "b6" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000007H "b7" 02H 00H 00H
CTYPEDEF 0000H 0000H 43H "_BYTE_FIELD" 04H 00H 05H 00H 00H
CFILE 0001H 00000022H "main\\mcu.h"
CFILE 0002H 000007EEH "C:\\Users\\cschell\\U8DEV~1\\Inc\\ml610111.h"
CFILE 0003H 00000036H "tbc\\tbc.h"
CFILE 0000H 00000052H "tbc\\tbc.c"

	rseg $$tb_setHtbdiv$tbc
CFUNCTION 0

_tb_setHtbdiv	:
CBLOCK 0 1 55

;;{
CLINEA 0000H 0001H 0037H 0001H 0001H
CBLOCK 0 2 55
CARGUMENT 46H 0001H 0014H "htd" 02H 00H 00H

;;	if( htd > (unsigned char)TB_HTD_1_1 ){
CLINEA 0000H 0001H 0039H 0002H 0027H
	cmp	r0,	#0fh
	ble	_$L1
CBLOCK 0 3 57

;;		return ( TB_R_ERR_HTD );
CLINEA 0000H 0001H 003AH 0003H 001AH
	mov	er0,	#-1
CBLOCKEND 0 3 59
CBLOCKEND 0 2 63

;;}
CLINEA 0000H 0001H 003FH 0001H 0001H
	rt

;;	}
CLINEA 0000H 0000H 003BH 0002H 0002H
_$L1 :

;;	HTBDR = htd;
CLINEA 0000H 0001H 003DH 0002H 000DH
	st	r0,	0f00bh

;;	return ( TB_R_OK );
CLINEA 0000H 0001H 003EH 0002H 0014H
	mov	er0,	#0 
	rt
CBLOCKEND 0 1 63
CFUNCTIONEND 0


	rseg $$tb_getHtbdiv$tbc
CFUNCTION 1

_tb_getHtbdiv	:
CBLOCK 1 1 73

;;{
CLINEA 0000H 0001H 0049H 0001H 0001H
CBLOCK 1 2 73
CLOCAL 46H 0001H 0014H 0002H "ratio" 02H 00H 00H

;;	ratio = HTBDR;
CLINEA 0000H 0001H 004DH 0002H 000FH
	l	r0,	0f00bh

;;	ratio = (unsigned char)( (unsigned char)( ~ratio ) & (unsigned char)HTBDR_HTD ) + (unsigned char)1;
CLINEA 0000H 0001H 004EH 0002H 0064H
	xor	r0,	#0ffh
	and	r0,	#0fh
	add	r0,	#01h

;;	return ( ratio );
CLINEA 0000H 0001H 004FH 0002H 0012H
CBLOCKEND 1 2 80

;;}
CLINEA 0000H 0000H 0050H 0001H 0001H
	rt
CBLOCKEND 1 1 80
CFUNCTIONEND 1

	public _tb_getHtbdiv
	public _tb_setHtbdiv
	extrn code near : _main

	end
